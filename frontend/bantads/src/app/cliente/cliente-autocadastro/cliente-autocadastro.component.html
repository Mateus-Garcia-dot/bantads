<h1>Novo cliente</h1>

<div class="container">
  <form #formCliente="ngForm">
    <div class="form-group">
      <mat-form-field>
        <mat-label for="salario">Salário Mensal:</mat-label>
        <input matInput [(ngModel)]="cliente.salario" #salario="ngModel" id="salario" name="salario" required
          numerico />
      </mat-form-field>
      <div *ngIf="salario.errors && (salario.dirty || salario.touched)" class="alert alert-danger">
        <div [hidden]="!salario?.errors?.['required']">
          Digite o seu salario
        </div>
      </div>
    </div>

    <div class="form-group">
      <mat-form-field>
        <mat-label for="nome">Nome:</mat-label>
        <input matInput [(ngModel)]="cliente.nome" #nome="ngModel" type="text" id="nome" name="nome" required />
      </mat-form-field>
      <div *ngIf="nome.errors && (nome.dirty || nome.touched)" class="alert alert-danger">
        <div [hidden]="!nome?.errors?.['required']">Digite o seu nome</div>
      </div>
    </div>
    <div class="row">
      <div class="form-group col">
        <mat-form-field>
          <mat-label for="cpf">CPF:</mat-label>
          <input matInput [(ngModel)]="cliente.cpf" #cpf="ngModel" type="text" id="cpf" name="cpf" required cpfValidator
            mask="000.000.000-00" />
        </mat-form-field>

        <div *ngIf="cpf.errors && (cpf.dirty || cpf.touched)" class="alert alert-danger">
          <div [hidden]="!cpf?.errors?.['required']">Digite o seu CPF</div>
          <div [hidden]="!cpf?.errors?.['cpfInvalido']">CPF inválido</div>
        </div>
      </div>

      <div class="form-group col">
        <mat-form-field>
          <mat-label for="email">E-mail:</mat-label>
          <input matInput [(ngModel)]="cliente.email" #email="ngModel" type="email" id="email" name="email" required />
        </mat-form-field>
        <div *ngIf="email.errors && (email.dirty || email.touched)" class="alert alert-danger">
          <div [hidden]="!email?.errors?.['required']">Digite o seu e-mail</div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="form-group col">
        <mat-form-field>
          <mat-label for="tipo">Tipo:</mat-label>
          <input matInput [(ngModel)]="cliente.endereco!.tipo" #tipo="ngModel" type="text" id="tipo" name="tipo"
            required />
        </mat-form-field>
        <div *ngIf="tipo.errors && (tipo.dirty || tipo.touched)" class="alert alert-danger">
          <div [hidden]="!tipo?.errors?.['required']">Digite o tipo do endereço</div>
        </div>
      </div>

      <div class="form-group col">
        <mat-form-field>
          <mat-label for="logradouro">Logradouro:</mat-label>
          <input matInput [(ngModel)]="cliente.endereco!.logradouro" #logradouro="ngModel" type="text" id="logradouro"
            name="logradouro" required />
        </mat-form-field>

        <div *ngIf="logradouro.errors && (logradouro.dirty || logradouro.touched)" class="alert alert-danger">
          <div [hidden]="!logradouro?.errors?.['required']">Digite o logradouro</div>
        </div>
      </div>

      <div class="form-group col">
        <mat-form-field>
          <mat-label for="numero">Número:</mat-label>
          <input matInput [(ngModel)]="cliente.endereco!.numero" #numero="ngModel" type="number" id="numero"
            name="numero" numerico required />
        </mat-form-field>

        <div *ngIf="numero.errors && (numero.dirty || numero.touched)" class="alert alert-danger">
          <div [hidden]="!numero?.errors?.['required']">Digite o seu numero</div>
        </div>
      </div>

      <div class="form-group col">
        <mat-form-field>
          <mat-label for="complemento">Complemento:</mat-label>
          <input matInput [(ngModel)]="cliente.endereco!.complemento" #complemento="ngModel" type="text"
            id="complemento" name="complemento" />
        </mat-form-field>

        <div *ngIf="complemento.errors && (complemento.dirty || complemento.touched)" class="alert alert-danger">
          <div [hidden]="!complemento?.errors?.['required']">Digite o complemento</div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="form-group col">
        <mat-form-field>
          <mat-label for="cidade">Cidade:</mat-label>
          <input matInput [(ngModel)]="cliente.endereco!.cidade" #cidade="ngModel" type="text" id="cidade" name="cidade"
            required />
        </mat-form-field>
        <div *ngIf="cidade.errors && (cidade.dirty || cidade.touched)" class="alert alert-danger">
          <div [hidden]="!cidade?.errors?.['required']">Digite a sua cidade</div>
        </div>
      </div>

      <div class="form-group col">
        <mat-form-field>
          <mat-label for="estado">Estado:</mat-label>
          <input matInput [(ngModel)]="cliente.endereco!.estado" #estado="ngModel" type="text" id="estado" name="estado"
            required />
        </mat-form-field>
        <div *ngIf="estado.errors && (estado.dirty || estado.touched)" class="alert alert-danger">
          <div [hidden]="!estado?.errors?.['required']">Digite o seu estado</div>
        </div>
      </div>
    </div>


    <div class="form-group">
      <button (click)="autocadastrar()" [disabled]="!formCliente.form.valid" type="button" class="btn btn-primary">
        <i class="fa fa-save" aria-hidden="true"></i> Salvar
      </button>
    </div>
  </form>

  <a class="btn btn-secondary" routerLink="/login">
    <i class="fa fa-arrow-left" aria-hidden="true"></i> Já possui uma conta?
    faça login
  </a>
</div>